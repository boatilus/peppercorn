<!DOCTYPE html>
<html>
  <head>
    <title>Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/style/lib/cutestrap.min.css">
    <style type="text/css">
      body {
        margin: 0 10% 2em 10%;
        width: 80%;
      }

      @media (max-width: 600px) {
        body {
          margin-left: 5%;
          margin-right: 5%;
        }
      }
      
      input:invalid {
        box-shadow: 0 0 5px 1px red;
      }
    </style>
  </head>

  <body>
    <h1>{{.Name}}</h1>

    <h2>Your Account</h2>
    <form method="post" action="/me">
      <label class="textfield">
        <input name="email" type="email" value="{{.ObfuscatedEmail}}" disabled />
        <span class="textfield__label">Email Address</span>
      </label>

      <label class="textfield">
        <input name="password" type="password" placeholder="********" autocomplete="off" />
        <span class="textfield__label">Password (8 characters or greater)</span>
      </label>

      <label class="textfield">
        <input
          name="name"
          type="text"
          value="{{.Name}}"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
          pattern=".{1,24}"
          required 
        />
        <span class="textfield__label">Handle <abbr title="This field is mandatory">*</abbr></span>
      </label>

      <label class="textfield">
        <input
          name="title"
          type="text"
          value="{{.Title}}"
          autocomplete="off"
          pattern=".{0}|.{1,36}"
          required
        />
        <span class="textfield__label">Title (36 characters or fewer)</span>
      </label>

      <label class="textfield">
        <input name="avatar" type="url" value="{{.Avatar}}" pattern="https?://.+" />
        <span class="textfield__label">Avatar</span>
      </label>

      <label class="select">
        <select name="posts_per_page">
          <option>10</option>
          <option>20</option>
          <option>50</option>
          <option>100</option>
        </select>
        <span class="select__label" for="select">Posts per Page</span>
      </label>

      <input type="submit" value="Save changes">
      <hr/>

      <h2>Devices and Sessions</h2>
      {{ range $i, $e := .Sessions }}
        <section class="grid grid--medium">
          <div class="column--heavy">
            {{ $e.Device }}<br>
            {{ $e.IP }}<br>
            Created on: <strong>{{ $e.Timestamp }}</strong>
          </div>
          <div>
            <a class="btn" href="/me/revoke/{{ $i }}">Revoke Access</a>
          </div>
        </section>
      {{ end }}
    </form>
  </body>
</html>
